{"name":"Groper","body":"## groper: simple Python command line and config file options\r\n\r\nPython programs that run from the command line often times contain code that looks like this:\r\n\r\n    DEFAULT_PORT = 8080\r\n    def main():\r\n        if len(sys.argv) > 2 and sys.argv[1] == '-p':\r\n            port = int(sys.argv[2])\r\n        else:\r\n            port = DEFAULT_PORT\r\n\r\nWhile technically correct, this code does not scale well. The next evolution of this code would use either getopt, argparse or optparse to help abstract parsing command line options. However, at some point the number of options would grow so large that a configuration file might be warranted and ConfigParser is introduced.\r\n\r\nHowever, the complexity of the code grows as this happens. To use (argparse|optparse|getopt) + ConfigParser effectively and correctly the program needs to:\r\n\r\n*   Parse the command line args, and figure out where the configuration file resides\r\n*   Read the configuration file and combine it with the command line args (the command line args take precidence)\r\n*   If not all required command line args are specified, print program usage and exit.\r\n*   The wrapper around ConfigPraser needs to provide a simple way to access the data\r\n*   Some values need to have defaults, which should be used if the config file and the command line args do not specify one\r\n\r\nImplementing this logic in each Python program is redundant. However, it seems that most programs do it this way. groper provides a simple unified interface for reading command line args, configuration files, setting defaults, printing program usage and even generating sample configuration files. Here is an example of its usage:\r\n\r\n    from groper import define_opt, init_options, options\r\n    \r\n    define_opt('server', 'host', type=unicode, cmd_name='host', cmd_short_name='h', default='localhost')\r\n    define_opt('server', 'port', type=int, cmd_name='port', cmd_short_name='p', default=8080)\r\n    define_opt('server', 'daemon', type=bool, cmd_name='daemon', cmd_short_name='d')\r\n    \r\n    # init_options() will automatically read this file. If you don't use a config file, simply comment this out\r\n    #define_opt('meta', 'config', type=unicode, cmd_only=True, cmd_name='config', cmd_short_name='c', is_config_file=True)\r\n    \r\n    # If specified: program usage will be printed and returned\r\n    # The cmd_group param means that when the usage is printed, this option will be specified in its own group\r\n    define_opt('meta', 'help', type=bool, cmd_only=True, cmd_name='help', cmd_short_name='H', is_help=True, cmd_group='help')\r\n    \r\n    def main():\r\n        init_options()\r\n        print options.server.host\r\n        print options.server.port\r\n        print options.server.daemon\r\n    \r\n    if __name__ == '__main__':\r\n        main()\r\n\r\nThat's it. You can use the options object from any module in which you import it to get access to the program settings. The *default* argument to the define_opt() function also provides a great feature: you can now specify all your constants as configurable options that can be read from the configuration file.\r\n\r\nAs if that wasn't enough, you can even generate sample configuration files:\r\n\r\n    \r\n    from groper import define_opt, init_options, options\r\n    \r\n    define_opt('server', 'host', type=unicode, cmd_name='host', cmd_short_name='h', default='localhost')\r\n    define_opt('server', 'port', type=int, cmd_name='port', cmd_short_name='p', default=8080)\r\n    define_opt('server', 'daemon', type=bool, cmd_name='daemon', cmd_short_name='d')\r\n    \r\n    print generate_sample_config()\r\n\r\nHopefully you will find groper useful. It can be installed via PyPi:\r\n\r\n    $ pip install groper\r\n\r\ngroper is licensed under the MIT license and is Copyright (c) 2011-2012 Igor Partola","tagline":"Python library for parsing config files and command line arguments","google":"UA-30541476-1","note":"Don't delete this file! It's used internally to help with page regeneration."}